---
title: "Earthquake_data"
author: "Xie"
date: "2018?~3??14??"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## RCrawler

```{r RCrawler}

# Earthquake quake data crawler

# install.packages("xml2")
# install.packages("rvest")
library(xml2)
library(rvest)
# Crawling earthquake data from cwb date set : 201802
txt=read_html("https://scweb.cwb.gov.tw/GraphicContent.aspx?ItemId=20&Date=201802&t=23d140a6-96f1-420f-b57f-6eee751cd48b")
txt=html_nodes(txt,"#ContentPlaceHolder1_ctl00_gvEarthquake a , #ContentPlaceHolder1_ctl00_gvEarthquake th")  
txt=html_text(txt)   
txt=iconv(txt,"UTF-8")

# data processing : clean the data and store it into dataframe type
name <- txt[1:7]
earthquake_data <- matrix(txt[8:length(txt)],(nrow=length(txt)-7)/7,ncol=7,byrow= TRUE)
earthquake_data <- data.frame(earthquake_data)
names(earthquake_data) <- name
# View(earthquake_data)

library(knitr)
kable(earthquake_data)


```

